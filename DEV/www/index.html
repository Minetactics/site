<!DOCTYPE html>
<html>
<head>
    <title>Homepage of Joseph Sallembien</title>
    <meta description="The page that best describes Joseph Sallembien: from CVs to projects.">
    <link rel="stylesheet" type="text/css" href="./styles/structure.css">
    <link rel="stylesheet" type="text/css" href="./styles/main.css">
</head>
<body>
    <div id="menu">
        <ul>
            <li onclick="location.href='index.html'"><span><a href="index.html">Home</a></span></li>
            <li onclick="location.href='pages/projects.html'"><span><a href="pages/projects.html">Projects</a></span></li>
            <li onclick="location.href='pages/docs.html'"><span><a href="pages/docs.html">Documents</a></span></li>
            <li onclick="location.href='pages/contact.html'"><span><a href="pages/contact.html">Contact me</a></span></li>
        </ul>
    </div>
    <div id="in-work">
        <div id="in-work-top" class="main">
        </div>
        <div id="in-work-mid" class="main">
            <div id="in-work-left">
                <span><h1>This site is under construction</h1></span>
                <div id="signup_form">
                <span><p>Sign up here</p></span><br>
                <!--<span>Name: <input type="text" id="name"></span><br>-->
                <span><p class="loginlabel">Email: </p><input type="email" id="mailID" required></span><br>
                <span><p class="loginlabel">Password: </p><input type="password" id="passwd" required></span><br>
                <span><button id="btnLogin" class="action-btn">Log in</button></span>
                <span><button id="btnSignUp" class="second-btn">Sign up</button></span>
                <span><button id="btnLogout" class="action-btn hidden">Logout</button></span>
                </div>
            </div>
            <div id="in-work-right">
            </div>
        </div>
        <div id="in-work-bott" class="main">
            <span><p>Please don't bot spam (it won't go through anyways...)</p></span>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/4.1.3/firebase.js"></script>
    <script>
    // Initialize Firebase
        var config = {
            apiKey: "AIzaSyBUPcnD4PtzffIGrKXKn5vLEVe3KWV8yQU",
            authDomain: "sallembiensite.firebaseapp.com",
            databaseURL: "https://sallembiensite.firebaseio.com",
            projectId: "sallembiensite",
            storageBucket: "sallembiensite.appspot.com",
            messagingSenderId: "111175740216"
        };
        firebase.initializeApp(config);       
        //var bigOne = document.getElementById("bigOne");
        //var dbRef = firebase.database().ref().child("text");
        //dbRef.on('value', snap => bigOne.innerText = snap.val());      
        //const txtName = document.getElementById("name");
        const txtEmail = document.getElementById("mailID");
        const txtPasswd = document.getElementById("passwd");
        const btnLogin = document.getElementById("btnLogin");
        const btnSignUp = document.getElementById("btnSignUp");
        const btnLogout = document.getElementById("btnLogout");  
        //Listener for login
        btnLogin.addEventListener('click', e =>{
            //Get values
            const email = txtEmail.value;
            const passwd = txtPasswd.value;
            const auth = firebase.auth();
            //Login
            const promise = auth.signInWithEmailAndPassword(email,passwd);
            promise.catch(e => console.log(e.message));  
        }); 
        //Listener for signup
        btnSignUp.addEventListener('click', e =>{
            //Get values
            const mail = txtEmail.value;
            const paswd = txtPasswd.value;
            const auth = firebase.auth();
            //Signup
            const promise = auth.createUserWithEmailAndPassword(mail,paswd);
            promise.catch(e => console.log(e.message));
        });
        //Listener for logout
        btnLogout.addEventListener('click', e=>{
            //Get values 
            const mail = txtEmail.value;
            const paswd = txtPasswd.value;
            const auth = firebase.auth();
            //Listener for logout
            firebase.auth().signOut();
        });
        //Realtime listener
        firebase.auth().onAuthStateChanged(firebaseUser => {
            if(firebaseUser){
                console.log(firebaseUser);
                btnLogout.classList.remove("hidden");
                btnLogin.classList.add("hidden");
            }else{
                console.log("You are not logged in!");
                btnLogout.classList.add("hidden");
                btnLogin.classList.remove("hidden");
            }
        });
    </script>
</body>
</html>